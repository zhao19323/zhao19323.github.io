<!DOCTYPE html>
<html lang="en">
<head>
	<title></title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	<link type="text/css" rel="stylesheet" href="main.css">
</head>
<body>
<script type="importmap">
	{
		"imports": {
			"three": "../build/three.module.js",
			"three/addons/": "./jsm/"
		}
	}
</script>

<script type="module">

	import * as THREE from 'three';

	import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
	import { PCDLoader } from 'three/addons/loaders/PCDLoader.js';
	import { GUI } from 'three/addons/libs/lil-gui.module.min.js';

	let camera, scene, renderer;

	init();
	render();

	function init() {

		renderer = new THREE.WebGLRenderer( { antialias: true } );
		renderer.setPixelRatio( window.devicePixelRatio );
		renderer.setSize( window.innerWidth, window.innerHeight );
		//renderer.setClearColor(color3);
		document.body.appendChild( renderer.domElement );

		scene = new THREE.Scene();

		camera = new THREE.PerspectiveCamera( 2, window.innerWidth / window.innerHeight, 0.01, 400 );
		camera.position.set( -20, 0, 1 );
		scene.add( camera );
		scene.background = new THREE.Color( 0x000000 );



		const controls = new OrbitControls( camera, renderer.domElement );
		controls.addEventListener( 'change', render ); // use if there is no animation loop
		controls.minDistance = 0.5;
		controls.maxDistance = 10;
		//controls.enabled = false;//旋转


		//scene.add( new THREE.AxesHelper( 1 ) );

		const loader = new PCDLoader();
		loader.load( './models/pcd/binary/Zaghetto.pcd', function ( points ) {

			points.geometry.center();
			points.geometry.rotateX( Math.PI );
			//points.name = 'Zaghetto.pcd';
			//points.setAttribute(color3);
			//points.material.color = new THREE.Color(0x97C89E);
			points.material.color = new THREE.Color(0x18ff00);

			scene.add( points );

			//#529f5e

			//const gui = new GUI();

			//gui.add( points.material, 'size', 0.001, 0.01 ).onChange( render );
			//gui.addColor( points.material, 'color').onChange( render );
			//gui.addColor( points.material, 'color').onChange( render );

			//gui.open();



			render();

		} );

		window.addEventListener( 'resize', onWindowResize );

	}

	function onWindowResize() {

		camera.aspect = window.innerWidth / window.innerHeight;
		camera.updateProjectionMatrix();

		renderer.setSize( window.innerWidth, window.innerHeight );

		render();

	}

	function render() {

		renderer.render( scene, camera );

	}

</script>
</body>
</html>
